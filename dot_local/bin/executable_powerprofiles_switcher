#!/bin/bash
if [ -n "$1" ]; then
    powerprofilesctl set $1 || exit 1
    dunstify -r 300 "Power-profile: $1"
    exit 0
fi
current_profile=$(powerprofilesctl get)

declare -A profiles	
profiles["power-saver"]=1
profiles["balanced"]=2 
profiles["performance"]=3
declare -A profiles_by_name
profiles_by_name[1]="power-saver"
profiles_by_name[2]="balanced"
profiles_by_name[3]="performance"

new_profile=$(echo ${profiles[$current_profile]} | awk '{print $1 + 1}')
if [ "$new_profile" == 4 ]; then
    new_profile=1
fi 
new_profile_name=${profiles_by_name[$new_profile]}
powerprofilesctl set $new_profile_name
dunstify -r 300 "Power-profile: $new_profile_name"

